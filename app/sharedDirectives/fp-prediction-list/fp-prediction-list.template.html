<div class="fp-prediction-list">


    <div class="fp-prediction-list__add-new-prediction-container">
        <fp-add-new-prediction
            ng-if="!ctrl.isAddNewPredictionHidden"
            autofocus="{{ctrl.isAddNewPredictionAutofocused}}"
            topic-title="{{ctrl.topicTitle}}"
            on-save-new-prediction-success="ctrl.onSaveNewPredictionSuccess(newPrediction)"
            on-save-new-prediction-request="ctrl.onSaveNewPredictionRequest()"
            is-label-hidden="{{ctrl.isAddNewPredictionLabelHidden}}">
        </fp-add-new-prediction>
    </div>


    <div class="fp-prediction-list__newly-added-predictions">
        <div class="fp-prediction-list__newly-added-prediction-is-saving" 
            ng-show="ctrl.isSavingNewPrediction">
            Saving prediction...
        </div>
        <div class="fp-prediction-list__newly-added-prediction">
            <div ng-repeat="prediction in ctrl.newlySavedPredictions">
                <fp-prediction
                prediction="prediction"
                show-topic-editing-by-default="true"
                topic-to-hide="ctrl.topicTitle" 
                onexpand="ctrl.expandPrediction(prediction)"
                on-delete-prediction-success="ctrl.onDeletePredictionSuccess(predictionId)">
                </fp-prediction>
            </div>
        </div>
    </div>

    <div class="fp-prediction-list__isloading-notice" 
        ng-show="ctrl.isLoadingPredictions">
        Loading {{ctrl.topicTitle}} predictions...
    </div>


    <div class="fp-prediction-list__predictions" 
        ng-show="ctrl.predictions.length">
        
        <div ng-repeat="prediction in ctrl.predictions track by prediction.id">
            <fp-prediction 
                prediction="prediction"
                topic-to-hide="ctrl.currentTopic" 
                onexpand="ctrl.expandPrediction(prediction)"
                on-delete-prediction-success="ctrl.onDeletePredictionSuccess(predictionId)">
            </fp-prediction>
        </div>

    </div>

    <div class="fp-prediction-list__no-predictions-found"
        ng-show="ctrl.predictions.length < ctrl.NUM_PREDICTIONS_PER_PAGE">
        Sorry there are no more {{ctrl.topicTitle}} predictions available at this time.
    </div>

    <div ng-if="ctrl.predictions.length >= 3 && ctrl.predictions.length < ctrl.NUM_PREDICTIONS_PER_PAGE"
        class="fp-prediction-list__second-add-new-prediction-container">
        <fp-add-new-prediction
            ng-if="!ctrl.isAddNewPredictionHidden"
            topic-title="{{ctrl.topicTitle}}"
            on-save-new-prediction-success="ctrl.onSaveNewPredictionSuccess(newPrediction)"
            on-save-new-prediction-request="ctrl.onSaveNewPredictionRequest()"
            is-label-hidden="{{ctrl.isAddNewPredictionLabelHidden}}">
        </fp-add-new-prediction>
    </div>


    <div class="fp-prediction-list__pagination"
        ng-if="ctrl.isPaginationActive">
        
        <button class="fp-prediction-list__pagination-next-button"
            ng-if="ctrl.nextPageNumber"
            ui-sref="{page:ctrl.nextPageNumber}">
            Next
        </button>
    
        <ul class="fp-prediction-list__pagination-pages">
            <li class="fp-prediction-list__pagination-page"
                ng-repeat="page in ctrl.previousPages">
                <a class="fp-prediction-list__pagination-link"
                    ui-sref="{page:page.urlId}"
                    ui-sref-active="fp-prediction-list__pagination-link--active">
                    {{page.title}}
                </a>
            </li>
        </ul>
    </div>

</div>




