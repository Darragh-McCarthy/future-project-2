


<div class="prediction" ng-class="{'prediction--expanded': predictionCtrl.prediction.isExpanded}">
  <div class="prediction__header">
    <a class="prediction__title" href="#">{{::predictionCtrl.prediction.title}}</a>
    <span class="prediction__topics">
      <a class="prediction__topic" ng-repeat="topic in ::predictionCtrl.prediction.topics" ui-sref="app.search({q:topic.title})">{{::topic.title}}</a>
    </span>
    <span class="prediction__created-at">{{::predictionCtrl.prediction.createdAt}}</span>
  </div>




  <div class="edit-prediction">
    <form class="edit-prediction__add-topics" ng-if="predictionCtrl.isEditingTopics">
      <label class="edit-prediction__add-topics-label" for="edit-prediction__topic-title-input">Add relevant topics</label>
      <!--<div class="edit-prediction__new-topics-list" ng-show="predictionCtrl.prediction.topics.length">
        <span class="edit-prediction__new-topic" ng-repeat="topic in predictionCtrl.newTopics">
          {{topic}} 
          <span class="delete" ng-click="makePrediction.removeTopic(topic)">Ã—</span>
        </span>
      </div>-->

      <!--
      <div class="edit-prediction__topic-error-messages">
        <ul><li ng-repeat="errorMessage in makePrediction.formErrorMessages.topicTitleErrors">{{errorMessage}}</li></ul>
        <ul><li ng-repeat="errorMessage in makePrediction.formErrorMessages.topicCountErrors">{{errorMessage}}</li></ul>
      </div>
      -->

      <input type="text" id="edit-prediction__topic-title-input" ng-model="predictionCtrl.newTopicTitle" />
      <button class="edit-prediction__add-topic-button" 
        ng-show="predictionCtrl.newTopicTitle.length >= 2" 
        ng-click="predictionCtrl.addNewTopic()">
        Add Topic
      </button>

      <!--<div class="edit-prediction__suggested-topics">
        <span class="edit-prediction__suggested-topics-title">Suggestions:</span>
        <ul class="edit-prediction__suggested-topics-list">
          <li class="edit-prediction__suggested-topics-topic" ng-repeat="suggestedTopic in ['Entertainment','Science','Technology','Health','Business','Other popular topics go here']" ng-click="makePrediction.addTopic(suggestedTopic)">{{suggestedTopic}}</li>
        </ul>
      </div>-->


    </form>

    

  </div>



  <div class="likelihood" ng-if="predictionCtrl.isLikelihoodSelectionVisible">
    <div class="likelihood__community-estimate">
      <div ng-if="predictionCtrl.prediction.isExpanded">
        <div class="likelihood__community-estimate__count">{{predictionCtrl.prediction.communityEstimatesCount}} votes</div>
        <div class="likelihood__community-estimate__graph">
          <div class="likelihood__community-estimate__graph-bar" ng-repeat="estimate in predictionCtrl.prediction.communityEstimates">
            <div ng-style="estimate.graphBarHeight"></div>
          </div>
        </div>
      </div>
    </div>
    <div class="likelihood__user-estimate">
      <div class="likelihood__user-estimate-option" 
        ng-click="predictionCtrl.toggleLikelihoodEstimate(predictionCtrl.prediction, estimate.percent)" 
        ng-repeat="estimate in predictionCtrl.prediction.communityEstimates track by $index" 
        ng-class="{'likelihood__user-estimate-option--active': estimate.percent == predictionCtrl.prediction.userEstimate}">
          {{::estimate.percent}}<span class="show-on-active">%<br/>likely</span>
      </div>
    </div>
  </div>
</div>




