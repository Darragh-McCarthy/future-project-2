<!--
Follow
Comments
Views
Shares
Vote of timescale
Custom vote
-->



<div class="prediction-list">

  <h1 ng-bind="predictionList.currentTopic"></h1>
  <div ng-hide="predictionList.isLoadingComplete" class="prediction-list__isloading-notice">Loading...</div>
  <div ng-show="predictionList.isLoadingComplete">
    <ul class="predictions">
      <li class="prediction" ng-class="{'prediction--expanded': prediction.isExpanded}" ng-repeat="prediction in predictionList.predictions | orderBy:'-created' track by prediction.id">

        <div class="prediction__header">
          <a class="prediction__title" href="#">{{::prediction.title}}</a>
          <span class="prediction__topics">
            <a class="prediction__topic" ng-repeat="topic in ::prediction.topics" ui-sref="app.search({q:topic.title})">{{::topic.title}}</a>
          </span>
        </div>

        <div class="likelihood">

          <div class="likelihood__community-estimate">
            <div ng-if="prediction.isExpanded">
              <div class="likelihood__community-estimate__count">{{prediction.communityEstimatesCount}} votes</div>
              <div class="likelihood__community-estimate__graph">
                <div class="likelihood__community-estimate__graph-bar" ng-repeat="estimate in prediction.communityEstimates">
                  <div ng-style="estimate.graphBarHeight"></div>
                </div>
              </div>
            </div>
          </div>

          <div class="likelihood__user-estimate">
            <div class="likelihood__user-estimate-option" ng-click="predictionList.toggleLikelihoodEstimate(prediction,estimate.percent)" ng-repeat="estimate in prediction.communityEstimates track by $index" ng-class="{'likelihood__user-estimate-option--active': estimate.percent == prediction.userEstimate}">
              {{::estimate.percent}}<span class="show-on-active">%<br/>likely</span>
            </div>
          </div>

        </div>
      </li>
    </ul>

    <div class="pagination">
      <a ui-sref="app.search({q:predictionList.currentTopic,page:5})">Next page</a>
    </div>


    
    <div class="prediction-list__kickstart-predictions-notice" ng-show="predictionList.currentTopic">
      This topic is just getting started.
      <br/>
      <button class="button--primary" ui-sref="app.make-prediction({topic:predictionList.currentTopic})">Add {{::predictionList.currentTopic}} prediction</button>
    </div>

  </div>



</div>