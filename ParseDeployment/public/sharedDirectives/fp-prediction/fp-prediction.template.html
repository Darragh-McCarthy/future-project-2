<article style=display:inline-block; class=fp-prediction ng-class="{'fp-prediction--expanded': ctrl.prediction.isExpanded}"><div class=fp-prediction__is-deleted-notice ng-show=ctrl.isDeleted><b>Deleted</b> {{ctrl.prediction.title}}</div><div ng-if=!ctrl.isDeleted class=fp-prediction__container><div ng-if=!ctrl.isEditingTopics class=fp-prediction__most-common-view><div ng-if=ctrl.predictionAuthor><img class=fp-prediction__author-img ng-src={{ctrl.predictionAuthor.publicFacebookData.profilePhotoUrl}} ui-sref=app.user-profile({userId:ctrl.predictionAuthor.userId})></div><div class=fp-prediction__topics ng-if=ctrl.areTopicsVisible ng-class="{'fp-prediction__topics--attention-grabbing':ctrl.reason}"><a class=fp-prediction__topic ui-sref="app.topic({'topic':topic.title})" ng-if="topic.title != ctrl.topicToHide" ng-repeat="topic in ctrl.prediction.topics">{{topic.title}}</a><span class=fp-prediction__inline-add-topic-button ng-click=ctrl.toggleEditing()>+</span></div><div class=fp-prediction__title ng-class="{'fp-prediction__title--large':ctrl.isExpanded}"><a class=fp-prediction__title-link ng-class="{'prediction__title-link--flash': ctrl.isFlashPredictionTitleActive}" ui-sref=app.prediction({predictionId:ctrl.prediction.id})>{{::ctrl.prediction.title}}</a></div><div class=fp-prediction__likelihood-selection><fp-user-judgement current-judgement=ctrl.prediction.userEstimate prediction-id={{ctrl.prediction.id}} on-add-reason=ctrl.onAddReason() on-already-has-reason=ctrl.setTopicsToVisible()></fp-user-judgement></div><span class=fp-prediction__toggle-topics-button ng-if=!ctrl.isEditingTopics ng-click=ctrl.toggleEditing()>Edit</span> <a class=fp-prediction__num-votes-num-reasons ui-sref=app.prediction({predictionId:ctrl.prediction.id}) ng-show="ctrl.areTopicsVisible && !ctrl.isExpanded">{{ctrl.prediction.reasonsCount}} perspectives</a></div><div ng-if=ctrl.isEditingTopics class=edit-prediction><form class=edit-prediction__add-topics-form><div class=fp-prediction-editing__prediction-title>{{::ctrl.prediction.title}}</div><div class=edit-prediction__topics ng-if=ctrl.prediction.topics.length><span class=edit-prediction__topic ng-repeat="topic in ctrl.prediction.topics">{{topic.title}} <span class=edit-prediction__delete-topic ng-click=ctrl.removeTopicFromPrediction(topic.id)>Ã—</span></span> <span class=prediction__topic__preview-while-saving ng-if=ctrl.topicIsSavingMessage><b>Adding</b> {{ctrl.topicIsSavingMessage}}</span></div><div class=prediction__topics-not-set-notice><span ng-hide="ctrl.prediction.topics.length > 0">This prediction is featured in <b>{{ctrl.prediction.topics.length}} topics</b></span></div><label ng-if="ctrl.prediction.topics.length < ctrl.maxTopicsPerPrediction" class=fp-prediction-editing__add-topic><div class=fp-prediction-editing__add-topic-label><span ng-hide="ctrl.prediction.topics.length > 0">Add topic</span> <span ng-hide="ctrl.prediction.topics.length === 0">Add another topic</span></div><input type=text id={{ctrl.topicInputId}} ng-model=ctrl.newTopicTitle></label><button class=text-input-popup-button ng-show="ctrl.newTopicTitle.length >= 2" ng-click=ctrl.addTopicFromInputToPrediction()>Add topic</button><input class=fp-prediction-editing__view-topic-suggestions-button type=button ng-hide="ctrl.isSuggestedTopicsVisible || ctrl.newTopicTitle.length" value="View example topics" ng-click=ctrl.showSuggestedTopics()><div class=edit-prediction__suggested-topics ng-show=ctrl.isSuggestedTopicsVisible><ul class=edit-prediction__suggested-topics-list><li class=edit-prediction__suggested-topics-topic ng-repeat="suggestedTopicTitle in ctrl.suggestedTopicTitles" ng-click=ctrl.addTopicFromSuggestedTopics($index)>{{suggestedTopicTitle}}</li></ul></div></form><div class=edit-prediction__next-step-container><input type=button class=fp-prediction-editing__is-finished-editing-button value=Done ng-class="{'fp-prediction-editing__is-finished-editing-button--deemphasised':ctrl.prediction.topics.length === 0}" ng-show="!ctrl.showDeletionConfirmation && ctrl.prediction.topics.length" ng-click=ctrl.toggleEditing()><button class=fp-prediction-editing__delete-prediction-button ng-show="ctrl.currentUserIsAuthor && ! ctrl.showDeletionConfirmation" ng-click=ctrl.toggleShowDeletionConfirmation()>Delete prediction</button><div class=edit-prediction_delete-prediction-confirmation ng-show=ctrl.showDeletionConfirmation>Are you sure you want to delete this prediction?<button ng-click=ctrl.toggleShowDeletionConfirmation()>Cancel</button><button ng-click=ctrl.deletePrediction()>Delete</button></div></div></div></div></article>