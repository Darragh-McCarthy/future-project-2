<article class=fp-prediction ng-class="{'fp-prediction--expanded': predictionCtrl.prediction.isExpanded}"><div class=fp-prediction__container><div ng-if=!predictionCtrl.isEditingTopics><div class=fp-prediction__topics><a class=fp-prediction__topic ui-sref="app.topic({'topic':topic.title})" ng-if="topic.title != predictionCtrl.topicToHide && predictionCtrl.prediction.isExpanded" ng-repeat="topic in predictionCtrl.prediction.topics">{{topic.title}}</a></div><div class=fp-prediction__title-container><a class=fp-prediction__title ng-class="{'prediction__title--flash':predictionCtrl.isFlashPredictionTitleActive}" ui-sref=app.prediction({predictionId:predictionCtrl.prediction.id})>{{::predictionCtrl.prediction.title}}</a></div><div class=fp-prediction__likelihood-selection><fp-likelihood-user-estimate on-select-option=predictionCtrl.toggleLikelihoodEstimate(percent) user-estimate-percent=predictionCtrl.prediction.userEstimate.percent></fp-likelihood-user-estimate><div class=fp-prediction__add-reason ng-if="predictionCtrl.prediction.isExpanded && !predictionCtrl.reason"><label class=add-reason__label>Why do you think this prediction is {{predictionCtrl.prediction.userEstimate.percent}}% likely?<input type=text id=prediction-{{predictionCtrl.prediction.id}}__add-reason-text-input ng-model=predictionCtrl.reasonInputText ng-keyup="$event.keyCode === 13 && predictionCtrl.addReason()" class=add-reason__text-input></label><button class=add-reason__submit-button ng-show=predictionCtrl.reasonInputText.length ng-click=predictionCtrl.addReason()>Add Reason</button></div></div><a class=fp-prediction__num-votes-num-reasons ui-sref=app.prediction({predictionId:predictionCtrl.prediction.id}) ng-if=predictionCtrl.reason>3383 votes, 33 reasons</a></div><div ng-if=predictionCtrl.isEditingTopics class=edit-prediction><form class=edit-prediction__add-topics-form ng-if="predictionCtrl.prediction.topics.length < predictionCtrl.maxTopicsPerPrediction"><div class=edit-prediction__topics><span class=edit-prediction__topic ng-repeat="topic in predictionCtrl.prediction.topics">{{topic.title}} <span class=edit-prediction__delete-topic ng-click=predictionCtrl.removeTopicFromPrediction(topic.id)>Ã—</span></span> <span class=prediction__topic__preview-while-saving ng-if=predictionCtrl.topicIsSavingMessage><b>Adding</b> {{predictionCtrl.topicIsSavingMessage}}</span></div><div class=edit-prediction__prediction-title>{{::predictionCtrl.prediction.title}}</div><span class=prediction__topics-not-set-notice ng-hide=predictionCtrl.prediction.topics.length>This prediction appears in <b>0 topics</b>. Add some relevant topics</span><label class=edit-prediction__add-topics-label>Add Topic<input type=text id=edit-prediction__topic-title-input ng-model=predictionCtrl.newTopicTitle></label><button class=edit-prediction__add-topic-button ng-show="predictionCtrl.newTopicTitle.length >= 2" ng-click=predictionCtrl.addTopicFromInputToPrediction()>Add topic</button><div class=edit-prediction__suggested-topics ng-if="predictionCtrl.prediction.topics.length === 0"><span class=edit-prediction__suggested-topics-title>Suggestions:</span><ul class=edit-prediction__suggested-topics-list><li class=edit-prediction__suggested-topics-topic ng-repeat="suggestedTopicTitle in predictionCtrl.suggestedTopicTitles" ng-click=predictionCtrl.addTopicFromSuggestedTopics($index)>{{suggestedTopicTitle}}</li></ul></div></form><div class=edit-prediction__next-step-container><input type=button class=edit-prediction__next-step-container__next-button value=Done ng-show="!predictionCtrl.showDeletionConfirmation && predictionCtrl.prediction.topics.length" ng-click=predictionCtrl.toggleEditing()><button class=edit-prediction__report-prediction-button ng-show={{!predictionCtrl.currentUserIsAuthor}}>Report</button><button class=edit-prediction__delete-prediction-button ng-show="predictionCtrl.currentUserIsAuthor && ! predictionCtrl.showDeletionConfirmation" ng-click=predictionCtrl.toggleShowDeletionConfirmation()>Delete prediction</button><div class=edit-prediction_delete-prediction-confirmation ng-show=predictionCtrl.showDeletionConfirmation>Are you sure you want to delete this prediction?<button ng-click=predictionCtrl.toggleShowDeletionConfirmation()>Cancel</button><button ng-click=predictionCtrl.deletePrediction()>Delete</button></div></div></div></div></article>